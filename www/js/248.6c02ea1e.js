"use strict";(self["webpackChunkclient2"]=self["webpackChunkclient2"]||[]).push([[248],{6248:function(e,a,l){l.r(a),l.d(a,{default:function(){return T}});var t=l(3396),s=l(4870),r=(l(7658),l(7139));const n={class:"player-seekbar"},o={class:"player-seekbar__time"};var u={__name:"VSeekbar",props:{duration:{type:Number,default:0},progress:{type:Number,default:0},type:{type:String,default:""},hasProgressBar:{type:Boolean,default:!1}},emits:["command"],setup(e,{emit:a}){const l=e,u=(0,s.iH)(!1),i=(0,s.iH)(0),c=(0,s.iH)(null),d=(0,t.Fl)((()=>{const e=u.value&&i.value?i.value:Math.round(1e3*l.progress/l.duration)/10;return isNaN(e)?0:e})),p=(0,t.Fl)((()=>{var e=new Date(null);return e.setSeconds(l.duration),e.toISOString().substr(14,5)})),v=(0,t.Fl)((()=>{var e=new Date(null);return e.setSeconds(l.progress),e.toISOString().substr(14,5)})),m=({layerX:e})=>{if(l.hasProgressBar){const a=c.value.clientWidth,l=Math.round(100*e/a);i.value=l,y(l)}},_=({clientX:e})=>{if(u.value&&c.value){const{offsetLeft:a,clientWidth:l}=c.value,t=a,s=a+l;if(e>t&&e<s){const t=Math.round(100*(e-a)/l);i.value=t}}},y=e=>{a("command",{command:"rewind",position:Math.round(l.duration/100*e)})},h=()=>{u.value=!0},f=()=>{u.value&&(u.value=!1,y(i.value))};return(0,t.bv)((()=>{document.addEventListener("mousemove",_),document.addEventListener("mouseup",f)})),(0,t.Ah)((()=>{document.removeEventListener("mousemove",_),document.removeEventListener("mouseup",f)})),(a,l)=>((0,t.wg)(),(0,t.iD)("div",n,[(0,t._)("div",o,[(0,t._)("span",null,(0,r.zw)((0,s.SU)(v)),1),(0,t._)("span",null,(0,r.zw)((0,s.SU)(p)),1)]),(0,t._)("div",{ref_key:"slider",ref:c,class:(0,r.C_)(["player-seekbar__slider",{"player-seekbar__slider--disabled":!e.hasProgressBar}])},[(0,t._)("div",{class:"player-seekbar__line",onClick:m}),(0,t._)("div",{class:"player-seekbar__pointer",style:(0,r.j5)(`left: calc(${(0,s.SU)(d)}% - 10px)`),onMousedown:h},null,36)],2)]))}};const i=u;var c=i,d={__name:"VVolume",props:{volume:{type:Number,default:0}},emits:["command"],setup(e,{emit:a}){const l=e,n=(0,s.iH)(!1),o=(0,s.iH)(null),u=(0,s.iH)(!1),i=(0,t.Fl)({set(e){a("command",{command:"setVolume",volume:e/100})},get(){return 100*l.volume}}),c=(0,t.Fl)((()=>({width:`${i.value}%`}))),d=()=>{n.value=!1},p=({layerX:e})=>{const a=o.value.clientWidth;i.value=10*Math.round(100*e/a/10)},v=({deltaY:e})=>{const a=i.value+(e<0?10:-10);a>=0&&a<=100&&(i.value=a)};return(e,a)=>{const l=(0,t.Q2)("outside");return(0,t.wy)(((0,t.wg)(),(0,t.iD)("div",{class:(0,r.C_)(["player-volume",{"player-volume--hover":u.value||n.value}]),onMouseover:a[1]||(a[1]=e=>u.value=!0),onMouseleave:a[2]||(a[2]=e=>u.value=!1)},[(0,t.WI)(e.$slots,"btn",{},(()=>[(0,t._)("i",{class:"icon icon-volume-2",onClick:a[0]||(a[0]=e=>n.value=!n.value)})])),(0,t._)("div",{ref_key:"body",ref:o,class:(0,r.C_)(["player-volume__body",{"player-volume__body--show":n.value||u.value}]),onWheel:v,onClick:p},[(0,t._)("div",{class:"player-volume__value",style:(0,r.j5)((0,s.SU)(c))},null,4)],34)],34)),[[l,d]])}}},p=l(89);const v=(0,p.Z)(d,[["__scopeId","data-v-999451de"]]);var m=v;const _={class:"player-track"};var y={__name:"VTrackControl",props:{playing:{type:Boolean,default:!1},hasNext:{type:Boolean,default:!1},hasPause:{type:Boolean,default:!1},hasPlay:{type:Boolean,default:!1},hasPrev:{type:Boolean,default:!1}},emits:["command"],setup(e,{emit:a}){const l=(e,l)=>{l&&a("command",{command:e})};return(a,s)=>((0,t.wg)(),(0,t.iD)("div",_,[(0,t._)("i",{class:(0,r.C_)(["icon icon-skip-back",{disabled:!e.hasPrev}]),onClick:s[0]||(s[0]=a=>l("prev",e.hasPrev))},null,2),e.playing?((0,t.wg)(),(0,t.iD)("i",{key:0,class:"icon icon-pause",onClick:s[1]||(s[1]=e=>l("stop",!0))})):((0,t.wg)(),(0,t.iD)("i",{key:1,class:"icon icon-play",onClick:s[2]||(s[2]=e=>l("play",!0))})),(0,t._)("i",{class:(0,r.C_)(["icon icon-skip-forward",{disabled:!e.hasNext}]),onClick:s[3]||(s[3]=a=>l("next",e.hasNext))},null,2)]))}};const h=y;var f=h;const b={class:"card-player"},k={class:"card-player__header"},g=(0,t._)("h1",null,"Play now",-1),S={class:"card-player__preview"},w=["href"],C=["src"],P={class:"card-player__body"},U={class:"card-player__title text-h5 mb-2"},F={class:"card-player__subtitle text-title-1"},x={class:"card-player__control"},B={class:"card-player__seekbar"},D={class:"card-player__buttons"},N={class:"card-player__volume"},$={class:"card-player__track"},j={class:"card-player__like"},W={key:0,class:"icon icon-heart-on"},M=(0,t._)("div",{class:"card-player__footer"},[(0,t._)("span",{class:"card-player__line"})],-1);var O={__name:"VPlayer",props:{experiments:{type:Object,default:()=>{}},extra:{type:Object,default:()=>{}},state:{type:Object,default:()=>{}},supported_features:{type:Object,default:()=>{}},unsupported_features:{type:Object,default:()=>{}}},emits:["command"],setup(e,{emit:a}){const l=e,n=(0,t.Fl)((()=>l.state?.playing||!1)),o=(0,t.Fl)((()=>l.state?.playerState||{})),u=(0,t.Fl)((()=>{const{playing:e,hasNext:a,hasPause:l,hasPlay:t,hasPrev:s}=o.value;return{playing:e,hasNext:a,hasPause:l,hasPlay:t,hasPrev:s}})),i=(0,t.Fl)((()=>{const{duration:e,progress:a,type:l,hasProgressBar:t}=o.value;return{duration:e,progress:a,type:l,hasProgressBar:t}})),d=(0,t.Fl)((()=>"Playlist"===(o.value?.playlistType||""))),p=(0,t.Fl)((()=>l.state?.volume||0)),v=(0,t.Fl)((()=>o.value?.id||0)),_=(0,t.Fl)((()=>y.value.match(/(\d*)-\d\//)?.[1])),y=(0,t.Fl)((()=>{const e=h.value?.coverURI||"";return e.replace("%%","200x200")})),h=(0,t.Fl)((()=>o.value?.extra||{})),O=e=>a("command",{command:"sendText",text:e});return(e,a)=>((0,t.wg)(),(0,t.iD)("div",b,[(0,t._)("div",k,[(0,t._)("i",{class:"icon icon-arrow-left",onClick:a[0]||(a[0]=a=>e.$router.push("/"))}),g]),(0,t._)("div",S,[(0,t._)("a",{href:`https://music.yandex.ru/album/${(0,s.SU)(_)}/track/${(0,s.SU)(v)}`,target:"_blank"},[(0,t._)("img",{height:"200",width:"200",src:`https://${(0,s.SU)(y)}`,alt:""},null,8,C)],8,w)]),(0,t._)("div",P,[(0,t._)("div",null,[(0,t._)("h3",U,(0,r.zw)((0,s.SU)(o).title),1),(0,t._)("p",F,(0,r.zw)((0,s.SU)(o).subtitle),1)])]),(0,t._)("div",x,[(0,t._)("div",B,[(0,t.Wm)((0,s.SU)(c),(0,t.dG)((0,s.SU)(i),{onCommand:a[1]||(a[1]=a=>e.$emit("command",a))}),null,16)]),(0,t._)("div",D,[(0,t._)("div",N,[(0,t.Wm)((0,s.SU)(m),{volume:(0,s.SU)(p),onCommand:a[2]||(a[2]=a=>e.$emit("command",a))},null,8,["volume"])]),(0,t._)("div",$,[(0,t.Wm)((0,s.SU)(f),(0,t.dG)((0,s.SU)(u),{playing:(0,s.SU)(n),onCommand:a[3]||(a[3]=a=>e.$emit("command",a))}),null,16,["playing"])]),(0,t._)("div",j,[(0,s.SU)(d)?((0,t.wg)(),(0,t.iD)("i",W)):((0,t.wg)(),(0,t.iD)("i",{key:1,class:"icon icon-heart",onClick:a[4]||(a[4]=e=>O("Поставь лайк"))}))])])]),M]))}};const V=O;var H=V,I=l(2483);const L={class:"page-player container"},z={class:"page-player__inner"};var E={__name:"PlayerView",props:{data:{type:Object,default:()=>({})},devices:{type:Array,default:()=>[]},onSend:{type:Function,default:null}},setup(e){const a=e,l=(0,I.yj)(),r=l.params.id,n=(0,t.Fl)((()=>a.data[r]?.data||{})),o=e=>a.onSend(r,e);return(e,a)=>((0,t.wg)(),(0,t.iD)("div",L,[(0,t._)("div",z,[(0,t.Wm)((0,s.SU)(H),(0,t.dG)((0,s.SU)(n),{onCommand:o}),null,16)])]))}};const G=E;var T=G}}]);