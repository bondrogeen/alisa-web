(function(){var e={8559:function(e,t,n){"use strict";var o=n(9242),a=n(1020),r=n(3816),i=n(3396),c=n(4870),s=n(2066);n(7658);const l=e=>((0,i.dD)("data-v-b8c0df52"),e=e(),(0,i.Cn)(),e),u={class:"app-header"},d={class:"app-header__inner container"},p=l((()=>(0,i._)("div",{class:"app-header__center"},null,-1))),f={class:"app-header__profile"},v=["onClick"],m={key:1,class:"icon icon-user"};var h={__name:"AppHeader",props:{token:{type:String,default:""},devices:{type:Array,default:()=>[]}},emits:["event"],setup(e,{emit:t}){const n=[{name:"Scan",icon:"icon-user",path:""}],o=e=>t("event",e);return(t,a)=>{const r=(0,i.up)("a-list"),c=(0,i.up)("a-dropdown");return(0,i.wg)(),(0,i.iD)("div",u,[(0,i._)("div",d,[(0,i._)("div",{class:"app-header__brand text-h4",onClick:a[0]||(a[0]=e=>t.$router.push({name:"Home"}))},"Alisa Web"),p,(0,i._)("div",f,[e.token?((0,i.wg)(),(0,i.j4)(c,{key:0},{activator:(0,i.w5)((({on:e})=>[(0,i._)("i",{class:"icon icon-settings",onClick:e.click},null,8,v)])),default:(0,i.w5)((()=>[(0,i.Wm)(r,{list:n,onClick:o})])),_:1})):((0,i.wg)(),(0,i.iD)("i",m))])])])}}},g=n(89);const y=(0,g.Z)(h,[["__scopeId","data-v-b8c0df52"]]);var _=y,k=n(7139);const w={class:"app-footer"},b={class:"app-footer__copyright container"},S=(0,i._)("a",{href:"https://github.com/bondrogeen/alisa-web",target:"blank"},[(0,i._)("i",{class:"icon icon-github"})],-1);function C(e,t){return(0,i.wg)(),(0,i.iD)("div",w,[(0,i._)("div",b,[(0,i._)("p",null,(0,k.zw)(`© ${(new Date).getFullYear()} «Alisa web»`),1),S])])}const A={},x=(0,g.Z)(A,[["render",C]]);var D=x;const O={class:"app"},E={class:"app__header"},T={class:"app__body"},j={class:"app__footer"};var U={__name:"App",setup(e){const t=(0,r.b7)(),n=(0,r.AY)(),{onMessage:o,onConnect:a,onDisconnect:l,onSend:u}=t,{onConnection:d}=n,{socket:p,data:f}=(0,r.Jk)(t),{init:v,devices:m}=(0,r.Jk)(n);p.value=(0,s.io)(),p.value.on("connect",a),p.value.on("disconnect",l),p.value.on("data",o);const h=async({name:e})=>{"Scan"===e&&await d()};return(e,t)=>{const n=(0,i.up)("router-view");return(0,i.wg)(),(0,i.iD)("div",O,[(0,i._)("div",E,[(0,i.Wm)((0,c.SU)(_),(0,i.dG)((0,c.SU)(v),{onEvent:h}),null,16)]),(0,i._)("div",T,[(0,i.Wm)(n,{devices:(0,c.SU)(m),data:(0,c.SU)(f),onSend:(0,c.SU)(u)},null,8,["devices","data","onSend"])]),(0,i._)("div",j,[(0,i.Wm)((0,c.SU)(D))])])}}};const L=U;var V=L,$=n(2483),F=({next:e})=>(0,r.AY)().isToken?e():e({name:"Login"}),W=({next:e})=>(0,r.AY)().isToken?e({name:"Home"}):e();const B=[{path:"/",name:"Home",component:()=>n.e(545).then(n.bind(n,4545)),meta:{middleware:[F]}},{path:"/login",name:"Login",component:()=>n.e(226).then(n.bind(n,1226)),meta:{middleware:[W]}},{path:"/player/:id",name:"Player",component:()=>n.e(248).then(n.bind(n,6248)),meta:{middleware:[F]}},{path:"/info/:id",name:"Info",component:()=>n.e(491).then(n.bind(n,2491)),meta:{middleware:[F]}},{path:"/tts/:id",name:"TTS",component:()=>n.e(874).then(n.bind(n,3874)),meta:{middleware:[F]}}];function I(e,t,n){const o=t[n];return o?(...a)=>{e.next(...a);const r=I(e,t,n+1);o({...e,next:r})}:e.next}const N=(0,$.p7)({history:(0,$.PO)("/"),routes:B});N.beforeEach(((e,t,n)=>{if(e.meta.middleware){const o=Array.isArray(e.meta.middleware)?e.meta.middleware:[e.meta.middleware],a={from:t,next:n,router:N,to:e},r=I(a,o,1);return o[0]({...a,next:r})}return n()}));var P=N;const Y=e=>{const t=n(3624);t.keys().forEach((n=>{const o=t(n),a=n.replace(/^.*[\\/]/,"").replace(/\.\w+$/,"");e.component(a,o.default||o)}))};var H=Y;const q={name:"outside",mounted(e,t){e.clickOutsideEvent=function(n){e===n.target||e.contains(n.target)||t.value(n,e)},document.body.addEventListener("click",e.clickOutsideEvent)},unmounted(e){document.body.removeEventListener("click",e.clickOutsideEvent)}};var M=q,z=[M];const Z=(0,a.WB)(),J=(0,o.ri)(V);z.forEach((e=>J.directive(e.name,e))),H(J),(async()=>{J.use(Z);const e=(0,r.AY)();await e.onState(),J.use(P),J.mount("#app")})()},3816:function(e,t,n){"use strict";n.d(t,{AY:function(){return u},b7:function(){return a},Jk:function(){return o.Jk}});var o=n(1020),a=((0,o.Q_)("app",{state:()=>({isLoading:!1,dialog:!1,content:{message:""},headerShadow:!1}),actions:{async setDialog(e){this.dialog=!0,this.content=e,this.content.message=e?.message||""},setLoader(e){const t=document.querySelector("#app-loader");t&&(t.style.display=e?"block":"none")}}}),(0,o.Q_)("socket",{state:()=>({data:{},isConnected:!1,socket:null}),actions:{onMessage(e){const{id:t,ip:n,data:o}=e;t&&n&&o&&(this.data[t]=e),console.log(e)},onSend(e,t){this.socket&&this.isConnected&&this.socket.emit("send",e,t)},onConnect(){this.isConnected=!0},onDisconnect(){this.isConnected=!1}},getters:{}})),r=n(4311);const i="service";var c=e=>({state:t=>e.get(`/${i}/state`,t),init:t=>e.post(`/${i}/init`,t),token:t=>e.post(`/${i}/token`,t),connection:t=>e.post(`/${i}/connection`,t)});const s=r.Z.create({baseURL:"/api/v1"});var l={service:c(s)};console.log(l);var u=(0,o.Q_)("service",{state:()=>({token:"",init:{}}),actions:{async onState(){const{data:e}=await l.service.state();this.init=e},async onYandexToken({username:e,password:t}){if(!e||!t)return;const{data:n}=await l.service.token({username:e,password:t});return n?.access_token?(this.token=n.access_token,n):void 0},async onInit(){try{if(!this.token)return;const{data:e}=await l.service.init({token:this.token});return await this.onConnection(),e}catch(e){console.log(e)}},async onConnection(){const{data:e}=await l.service.connection();return await this.onState(),e}},getters:{isToken:e=>e?.init?.token||"",devices:e=>e?.init?.devices||""}})},3925:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var o=n(3396),a=n(7139),r={__name:"AButton",props:{text:{type:String,default:""},color:{type:String,default:""},full:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},emits:["click"],setup(e,{emit:t}){const n=e,r=e=>{n.loading||n.disabled||t("click",e)};return(t,n)=>{const i=(0,o.up)("a-spinner");return(0,o.wg)(),(0,o.iD)("button",{class:(0,a.C_)(["a-button",[`a-button--${e.color}`,{"a-button--full":e.full},{"a-button--loading":e.loading},{"a-button--disabled":e.disabled}]]),onClick:r},[e.loading?((0,o.wg)(),(0,o.j4)(i,{key:1})):(0,o.WI)(t.$slots,"default",{key:0},(()=>[(0,o.Uk)((0,a.zw)(e.text),1)]))],2)}}};const i=r;var c=i},153:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var o=n(3396);const a={class:"a-checkbox"},r=["checked"],i=(0,o._)("span",{class:"a-checkbox__mark"},null,-1);var c={__name:"ACheckbox",props:{modelValue:{type:[Boolean,Number],default:!1}},emits:["update:modelValue"],setup(e,{emit:t}){const n=({target:e})=>t("update:modelValue",e.checked);return(t,c)=>((0,o.wg)(),(0,o.iD)("label",a,[(0,o._)("input",{checked:e.modelValue,class:"a-checkbox__input",type:"checkbox",onChange:n},null,40,r),i,(0,o.WI)(t.$slots,"default")]))}};const s=c;var l=s},3037:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var o=n(3396),a=n(7139),r=n(9242),i=n(4870);const c={class:"a-dropdown__activator"};var s={__name:"ADropdown",props:{top:{type:String,default:"calc(100% + 5px)"},left:{type:String,default:""},right:{type:String,default:"0"},hideOnClick:{type:Boolean,default:!0},height:{type:String,default:"200px"},width:{type:String,default:"100%"}},emits:["click","show","close"],setup(e,{emit:t}){const n=e,s=(0,i.iH)(!1),l=(0,o.Fl)((()=>({top:n.top,left:n.left,right:n.right,"min-width":n.width}))),u=()=>{s.value&&f()},d=()=>{s.value?n.hideOnClick&&f():p(),t("click",s.value)},p=()=>{s.value=!0,t("show")},f=()=>{s.value=!1,t("close")};return(e,t)=>{const n=(0,o.Q2)("outside");return(0,o.wy)(((0,o.wg)(),(0,o.iD)("div",{class:(0,a.C_)(["a-dropdown",{"a-dropdown--opened":s.value}])},[(0,o._)("div",c,[(0,o.WI)(e.$slots,"activator",{on:{click:d},show:s.value})]),(0,o.Wm)(r.uT,{name:"slide-up"},{default:(0,o.w5)((()=>[s.value?((0,o.wg)(),(0,o.iD)("div",{key:0,style:(0,a.j5)((0,i.SU)(l)),class:"a-dropdown__content",onClick:d},[(0,o.WI)(e.$slots,"default",{onShow:p,onHide:f,show:s.value})],4)):(0,o.kq)("",!0)])),_:3})],2)),[[n,u]])}}};const l=s;var u=l},7015:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var o=n(3396),a=n(7139);const r={class:"a-field__label"},i={class:"a-field__body"},c={class:"a-field__hint"};var s={__name:"AField",props:{label:{type:String,default:""},error:{type:String,default:""},dark:{type:Boolean,default:!1}},setup(e){return(t,n)=>((0,o.wg)(),(0,o.iD)("div",{class:(0,a.C_)(["a-field",{"a-field--dark":e.dark}])},[(0,o._)("label",r,(0,a.zw)(e.label),1),(0,o._)("div",i,[(0,o.WI)(t.$slots,"default")]),(0,o._)("div",c,(0,a.zw)(e.error),1)],2))}};const l=s;var u=l},8639:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var o=n(3396),a=n(4870),r=n(9242);const i=["type","placeholder"];var c={__name:"AInput",props:{modelValue:{type:String,default:""},type:{type:String,default:"text"},placeholder:{type:String,default:""},value:{type:String,default:""}},emits:["update:modelValue","focus"],setup(e,{emit:t}){const n=e,c=(0,o.Fl)({set:e=>{console.log(e),t("update:modelValue",e)},get:()=>n.modelValue}),s=e=>t("focus",e);return(t,n)=>(0,o.wy)(((0,o.wg)(),(0,o.iD)("input",{"onUpdate:modelValue":n[0]||(n[0]=e=>(0,a.dq)(c)?c.value=e:null),type:e.type,class:"a-input",placeholder:e.placeholder,onFocus:s},null,40,i)),[[r.YZ,(0,a.SU)(c)]])}};const s=c;var l=s},2032:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var o=n(3396),a=n(7139);const r={class:"a-list"},i=["onClick"];var c={__name:"AList",props:{list:{type:Array,default:()=>[]}},emits:["click"],setup(e,{emit:t}){const n=e=>t("click",e);return(t,c)=>((0,o.wg)(),(0,o.iD)("ul",r,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.list,((e,r)=>((0,o.wg)(),(0,o.iD)("li",{key:"list_"+r,class:"a-list__item",onClick:t=>n(e)},[(0,o.WI)(t.$slots,"default",{item:e},(()=>[(0,o.Uk)((0,a.zw)(e.name),1)]))],8,i)))),128))]))}};const s=c;var l=s},2200:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return v}});var o=n(3396),a=n(7139);const r=(0,o._)("div",null,null,-1),i=(0,o._)("div",null,null,-1),c=(0,o._)("div",null,null,-1),s=(0,o._)("div",null,null,-1),l=[r,i,c,s];function u(e,t,n,r,i,c){return(0,o.wg)(),(0,o.iD)("div",{class:"a-spinner",style:(0,a.j5)({width:2*n.radius+"px",height:2*n.radius+"px"})},l,4)}var d={name:"a-spinner",props:{radius:{type:Number,default:14}}},p=n(89);const f=(0,p.Z)(d,[["render",u]]);var v=f},1063:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var o=n(3396),a=n(4870),r=n(9242);const i=["placeholder"];var c={__name:"ATextarea",props:{modelValue:{type:String,default:""},placeholder:{type:String,default:""},value:{type:String,default:""}},emits:["update:modelValue","focus"],setup(e,{emit:t}){const n=e,c=(0,o.Fl)({set:e=>t("update:modelValue",e),get:()=>n.modelValue}),s=e=>t("focus",e);return(t,n)=>(0,o.wy)(((0,o.wg)(),(0,o.iD)("textarea",{"onUpdate:modelValue":n[0]||(n[0]=e=>(0,a.dq)(c)?c.value=e:null),class:"a-textarea",rows:"3",cols:"50",placeholder:e.placeholder,onFocus:s},null,40,i)),[[r.nr,(0,a.SU)(c)]])}};const s=c;var l=s},3624:function(e,t,n){var o={"./AButton.vue":3925,"./ACheckbox.vue":153,"./ADropdown.vue":3037,"./AField.vue":7015,"./AInput.vue":8639,"./AList.vue":2032,"./ASpinner.vue":2200,"./ATextarea.vue":1063};function a(e){var t=r(e);return n(t)}function r(e){if(!n.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}a.keys=function(){return Object.keys(o)},a.resolve=r,e.exports=a,a.id=3624}},t={};function n(o){var a=t[o];if(void 0!==a)return a.exports;var r=t[o]={exports:{}};return e[o](r,r.exports,n),r.exports}n.m=e,function(){var e=[];n.O=function(t,o,a,r){if(!o){var i=1/0;for(u=0;u<e.length;u++){o=e[u][0],a=e[u][1],r=e[u][2];for(var c=!0,s=0;s<o.length;s++)(!1&r||i>=r)&&Object.keys(n.O).every((function(e){return n.O[e](o[s])}))?o.splice(s--,1):(c=!1,r<i&&(i=r));if(c){e.splice(u--,1);var l=a();void 0!==l&&(t=l)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[o,a,r]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,o){return n.f[o](e,t),t}),[]))}}(),function(){n.u=function(e){return"js/"+e+"."+{226:"d7fe291d",248:"6c02ea1e",491:"40e7dc9f",545:"72b54781",874:"aaa9058f"}[e]+".js"}}(),function(){n.miniCssF=function(e){return"css/"+e+"."+{226:"23589d11",248:"4e6b7ecd",491:"859c3fdd",545:"635b974c",874:"266670be"}[e]+".css"}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="client2:";n.l=function(o,a,r,i){if(e[o])e[o].push(a);else{var c,s;if(void 0!==r)for(var l=document.getElementsByTagName("script"),u=0;u<l.length;u++){var d=l[u];if(d.getAttribute("src")==o||d.getAttribute("data-webpack")==t+r){c=d;break}}c||(s=!0,c=document.createElement("script"),c.charset="utf-8",c.timeout=120,n.nc&&c.setAttribute("nonce",n.nc),c.setAttribute("data-webpack",t+r),c.src=o),e[o]=[a];var p=function(t,n){c.onerror=c.onload=null,clearTimeout(f);var a=e[o];if(delete e[o],c.parentNode&&c.parentNode.removeChild(c),a&&a.forEach((function(e){return e(n)})),t)return t(n)},f=setTimeout(p.bind(null,void 0,{type:"timeout",target:c}),12e4);c.onerror=p.bind(null,c.onerror),c.onload=p.bind(null,c.onload),s&&document.head.appendChild(c)}}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.p="/"}(),function(){var e=function(e,t,n,o){var a=document.createElement("link");a.rel="stylesheet",a.type="text/css";var r=function(r){if(a.onerror=a.onload=null,"load"===r.type)n();else{var i=r&&("load"===r.type?"missing":r.type),c=r&&r.target&&r.target.href||t,s=new Error("Loading CSS chunk "+e+" failed.\n("+c+")");s.code="CSS_CHUNK_LOAD_FAILED",s.type=i,s.request=c,a.parentNode.removeChild(a),o(s)}};return a.onerror=a.onload=r,a.href=t,document.head.appendChild(a),a},t=function(e,t){for(var n=document.getElementsByTagName("link"),o=0;o<n.length;o++){var a=n[o],r=a.getAttribute("data-href")||a.getAttribute("href");if("stylesheet"===a.rel&&(r===e||r===t))return a}var i=document.getElementsByTagName("style");for(o=0;o<i.length;o++){a=i[o],r=a.getAttribute("data-href");if(r===e||r===t)return a}},o=function(o){return new Promise((function(a,r){var i=n.miniCssF(o),c=n.p+i;if(t(i,c))return a();e(o,c,a,r)}))},a={143:0};n.f.miniCss=function(e,t){var n={226:1,248:1,491:1,545:1,874:1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=o(e).then((function(){a[e]=0}),(function(t){throw delete a[e],t})))}}(),function(){var e={143:0};n.f.j=function(t,o){var a=n.o(e,t)?e[t]:void 0;if(0!==a)if(a)o.push(a[2]);else{var r=new Promise((function(n,o){a=e[t]=[n,o]}));o.push(a[2]=r);var i=n.p+n.u(t),c=new Error,s=function(o){if(n.o(e,t)&&(a=e[t],0!==a&&(e[t]=void 0),a)){var r=o&&("load"===o.type?"missing":o.type),i=o&&o.target&&o.target.src;c.message="Loading chunk "+t+" failed.\n("+r+": "+i+")",c.name="ChunkLoadError",c.type=r,c.request=i,a[1](c)}};n.l(i,s,"chunk-"+t,t)}},n.O.j=function(t){return 0===e[t]};var t=function(t,o){var a,r,i=o[0],c=o[1],s=o[2],l=0;if(i.some((function(t){return 0!==e[t]}))){for(a in c)n.o(c,a)&&(n.m[a]=c[a]);if(s)var u=s(n)}for(t&&t(o);l<i.length;l++)r=i[l],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(u)},o=self["webpackChunkclient2"]=self["webpackChunkclient2"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(8559)}));o=n.O(o)})();