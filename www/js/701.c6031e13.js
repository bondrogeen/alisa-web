"use strict";(self["webpackChunkclient2"]=self["webpackChunkclient2"]||[]).push([[701],{4701:function(e,a,l){l.r(a),l.d(a,{default:function(){return Z}});var t=l(3396),s=l(4870),n=(l(7658),l(7139));const r={class:"player-seekbar"},o={class:"player-seekbar__time"},c=(0,t._)("div",null,null,-1),i=[c];var u={__name:"VSeekbar",props:{duration:{type:Number,default:0},progress:{type:Number,default:0},type:{type:String,default:""},hasProgressBar:{type:Boolean,default:!1}},emits:["command"],setup(e,{emit:a}){const l=e,c=(0,s.iH)(!1),u=(0,s.iH)(0),d=(0,s.iH)(null),v=(0,t.Fl)((()=>{const e=c.value&&u.value?u.value:Math.round(1e3*l.progress/l.duration)/10;return isNaN(e)?0:e})),p=(0,t.Fl)((()=>{var e=new Date(null);return e.setSeconds(l.duration),e.toISOString().substr(14,5)})),_=(0,t.Fl)((()=>{var e=new Date(null);return e.setSeconds(l.progress),e.toISOString().substr(14,5)})),m=({layerX:e})=>{if(l.hasProgressBar){const a=d.value.clientWidth,l=Math.round(100*e/a);u.value=l,h(l)}},y=({clientX:e})=>{if(c.value&&d.value){const{offsetLeft:a,clientWidth:l}=d.value,t=a,s=a+l;if(e>t&&e<s){const t=Math.round(100*(e-a)/l);u.value=t}}},h=e=>{a("command",{command:"rewind",position:Math.round(l.duration/100*e)})},b=()=>{c.value=!0},f=()=>{c.value&&(c.value=!1,h(u.value))};return(0,t.bv)((()=>{document.addEventListener("mousemove",y),document.addEventListener("mouseup",f)})),(0,t.Ah)((()=>{document.removeEventListener("mousemove",y),document.removeEventListener("mouseup",f)})),(a,l)=>((0,t.wg)(),(0,t.iD)("div",r,[(0,t._)("div",o,[(0,t._)("span",null,(0,n.zw)((0,s.SU)(_)),1),(0,t._)("span",null,(0,n.zw)((0,s.SU)(p)),1)]),(0,t._)("div",{ref_key:"slider",ref:d,class:(0,n.C_)(["player-seekbar__slider",{"player-seekbar__slider--disabled":!e.hasProgressBar}])},[(0,t._)("div",{class:"player-seekbar__line",onClick:m},i),(0,t._)("div",{class:"player-seekbar__pointer",style:(0,n.j5)(`left: calc(${(0,s.SU)(v)}% - 10px)`),onMousedown:b},null,36)],2)]))}};const d=u;var v=d,p={__name:"VVolume",props:{volume:{type:Number,default:0}},emits:["command"],setup(e,{emit:a}){const l=e,r=(0,s.iH)(!1),o=(0,s.iH)(null),c=(0,s.iH)(!1),i=(0,t.Fl)({set(e){a("command",{command:"setVolume",volume:e/100})},get(){return 100*l.volume}}),u=(0,t.Fl)((()=>({width:`${i.value}%`}))),d=()=>{r.value=!1},v=({layerX:e})=>{const a=o.value.clientWidth;i.value=10*Math.round(100*e/a/10)},p=({deltaY:e})=>{const a=i.value+(e<0?10:-10);a>=0&&a<=100&&(i.value=a)};return(e,a)=>{const l=(0,t.Q2)("outside");return(0,t.wy)(((0,t.wg)(),(0,t.iD)("div",{class:(0,n.C_)(["player-volume",{"player-volume--hover":c.value||r.value}]),onMouseover:a[1]||(a[1]=e=>c.value=!0),onMouseleave:a[2]||(a[2]=e=>c.value=!1)},[(0,t.WI)(e.$slots,"btn",{},(()=>[(0,t._)("i",{class:"icon icon-volume-2",onClick:a[0]||(a[0]=e=>r.value=!r.value)})])),(0,t._)("div",{ref_key:"body",ref:o,class:(0,n.C_)(["player-volume__body",{"player-volume__body--show":r.value||c.value}]),onWheel:p,onClick:v},[(0,t._)("div",{class:"player-volume__value",style:(0,n.j5)((0,s.SU)(u))},null,4)],34)],34)),[[l,d]])}}},_=l(89);const m=(0,_.Z)(p,[["__scopeId","data-v-51428891"]]);var y=m;const h={class:"player-track"};var b={__name:"VTrackControl",props:{playing:{type:Boolean,default:!1},hasNext:{type:Boolean,default:!1},hasPause:{type:Boolean,default:!1},hasPlay:{type:Boolean,default:!1},hasPrev:{type:Boolean,default:!1}},emits:["command"],setup(e,{emit:a}){const l=(e,l)=>{l&&a("command",{command:e})};return(a,s)=>((0,t.wg)(),(0,t.iD)("div",h,[(0,t._)("i",{class:(0,n.C_)(["icon icon-skip-back",{disabled:!e.hasPrev}]),onClick:s[0]||(s[0]=a=>l("prev",e.hasPrev))},null,2),e.playing?((0,t.wg)(),(0,t.iD)("i",{key:0,class:"icon icon-pause",onClick:s[1]||(s[1]=e=>l("stop",!0))})):((0,t.wg)(),(0,t.iD)("i",{key:1,class:"icon icon-play",onClick:s[2]||(s[2]=e=>l("play",!0))})),(0,t._)("i",{class:(0,n.C_)(["icon icon-skip-forward",{disabled:!e.hasNext}]),onClick:s[3]||(s[3]=a=>l("next",e.hasNext))},null,2)]))}};const f=b;var k=f;const g=e=>((0,t.dD)("data-v-1c70b1cb"),e=e(),(0,t.Cn)(),e),S={class:"card-player"},w={class:"card-player__header hover"},C=g((()=>(0,t._)("h1",null,"Play now",-1))),U={class:"card-player__preview"},F=["href"],x=["src"],D={class:"card-player__body"},P={class:"card-player__title"},$={class:"card-player__subtitle"},B={class:"card-player__control"},W={class:"card-player__seekbar"},j={class:"card-player__buttons"},M={class:"card-player__volume"},N={class:"card-player__track"},I={class:"card-player__like hover"},O={key:0,class:"icon icon-heart-on"},V=g((()=>(0,t._)("div",{class:"card-player__footer"},[(0,t._)("span",{class:"card-player__line"})],-1)));var H={__name:"VPlayer",props:{experiments:{type:Object,default:()=>{}},extra:{type:Object,default:()=>{}},state:{type:Object,default:()=>{}},supported_features:{type:Object,default:()=>{}},unsupported_features:{type:Object,default:()=>{}}},emits:["command"],setup(e,{emit:a}){const l=e,r=(0,t.Fl)((()=>l.state?.playing||!1)),o=(0,t.Fl)((()=>l.state?.playerState||{})),c=(0,t.Fl)((()=>"Playlist"===(o.value?.playlistType||""))),i=(0,t.Fl)((()=>l.state?.volume||0)),u=(0,t.Fl)((()=>o.value?.id||0)),d=(0,t.Fl)((()=>p.value.match(/(\d*)-\d\//)?.[1])),p=(0,t.Fl)((()=>{const e=_.value?.coverURI||"";return e.replace("%%","200x200")})),_=(0,t.Fl)((()=>o.value?.extra||{})),m=e=>a("command",{command:"sendText",text:e});return(e,a)=>((0,t.wg)(),(0,t.iD)("div",S,[(0,t._)("div",w,[(0,t._)("i",{class:"icon icon-arrow-left",onClick:a[0]||(a[0]=a=>e.$router.push("/"))}),C]),(0,t._)("div",U,[(0,t._)("a",{href:`https://music.yandex.ru/album/${(0,s.SU)(d)}/track/${(0,s.SU)(u)}`,target:"_blank"},[(0,t._)("img",{height:"200",width:"200",src:`https://${(0,s.SU)(p)}`,alt:""},null,8,x)],8,F)]),(0,t._)("div",D,[(0,t._)("div",null,[(0,t._)("h3",P,(0,n.zw)((0,s.SU)(o).title),1),(0,t._)("p",$,(0,n.zw)((0,s.SU)(o).subtitle),1)])]),(0,t._)("div",B,[(0,t._)("div",W,[(0,t.Wm)((0,s.SU)(v),(0,t.dG)((0,s.SU)(o),{onCommand:a[1]||(a[1]=a=>e.$emit("command",a))}),null,16)]),(0,t._)("div",j,[(0,t._)("div",M,[(0,t.Wm)((0,s.SU)(y),{volume:(0,s.SU)(i),onCommand:a[2]||(a[2]=a=>e.$emit("command",a))},null,8,["volume"])]),(0,t._)("div",N,[(0,t.Wm)((0,s.SU)(k),(0,t.dG)((0,s.SU)(o),{playing:(0,s.SU)(r),onCommand:a[3]||(a[3]=a=>e.$emit("command",a))}),null,16,["playing"])]),(0,t._)("div",I,[(0,s.SU)(c)?((0,t.wg)(),(0,t.iD)("i",O)):((0,t.wg)(),(0,t.iD)("i",{key:1,class:"icon icon-heart",onClick:a[4]||(a[4]=e=>m("Поставь лайк"))}))])])]),V]))}};const L=(0,_.Z)(H,[["__scopeId","data-v-1c70b1cb"]]);var z=L,E=l(2483);const G={class:"page-player__inner"};var T={__name:"PlayerView",props:{devices:{type:Array,default:()=>[]},onSend:{type:Function,default:null}},setup(e){const a=e,l=(0,E.yj)(),n=l.params.id,r=(0,t.Fl)((()=>a.devices[n]?.data||{})),o=e=>a.onSend(n,e),c=()=>{console.log("sdsdsdsd")};return(e,a)=>((0,t.wg)(),(0,t.iD)("div",{class:"page-player",onClick:c},[(0,t._)("div",G,[(0,t.Wm)((0,s.SU)(z),(0,t.dG)((0,s.SU)(r),{onCommand:o}),null,16)])]))}};const X=(0,_.Z)(T,[["__scopeId","data-v-b615dd9c"]]);var Z=X}}]);